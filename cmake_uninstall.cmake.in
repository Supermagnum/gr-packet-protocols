# Uninstall script for gr-packet-protocols
# This file is generated by CMake and tracks all installed files

if(NOT EXISTS "@CMAKE_CURRENT_BINARY_DIR@/install_manifest.txt")
  message(FATAL_ERROR "Cannot find install manifest: @CMAKE_CURRENT_BINARY_DIR@/install_manifest.txt")
endif()

file(READ "@CMAKE_CURRENT_BINARY_DIR@/install_manifest.txt" files)
string(REGEX REPLACE "\n" ";" files "${files}")

foreach(file ${files})
  message(STATUS "Uninstalling: $ENV{DESTDIR}${file}")
  if(EXISTS "$ENV{DESTDIR}${file}")
    file(REMOVE "$ENV{DESTDIR}${file}")
    if(EXISTS "$ENV{DESTDIR}${file}")
      message(FATAL_ERROR "Problem when removing \"$ENV{DESTDIR}${file}\"")
    endif()
  else()
    message(STATUS "File \"$ENV{DESTDIR}${file}\" does not exist.")
  endif()
endforeach(file)

# Remove empty directories (only if they exist and are empty)
set(dirs_to_check
  "@CMAKE_INSTALL_PREFIX@/include/gnuradio/packet_protocols"
  "@CMAKE_INSTALL_PREFIX@/lib/python3/dist-packages/gnuradio/packet_protocols"
  "@CMAKE_INSTALL_PREFIX@/share/gnuradio/gr-packet-protocols"
)

foreach(dir ${dirs_to_check})
  if(EXISTS "$ENV{DESTDIR}${dir}")
    file(GLOB dir_contents "$ENV{DESTDIR}${dir}/*")
    list(LENGTH dir_contents dir_count)
    if(dir_count EQUAL 0)
      file(REMOVE_RECURSE "$ENV{DESTDIR}${dir}")
      message(STATUS "Removed empty directory: $ENV{DESTDIR}${dir}")
    else()
      message(STATUS "Directory \"$ENV{DESTDIR}${dir}\" is not empty, skipping removal")
    endif()
  endif()
endforeach(dir)

message(STATUS "Uninstallation complete. Run 'sudo ldconfig' to update library cache.")

